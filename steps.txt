# STEP TO RUN PROGRAMS

## CREATE VIRTUAL MACHINE

1. python3 -m venv trenv ==> mac
2. py -3.11 -m venv trenv ==> windows
3. py -0p => to get all python list in windows

(Optional to install specific version) MAC

1. brew install python@3.11
2. ls -l /opt/homebrew/opt/python@3.11/bin/python3.11
3. /opt/homebrew/opt/python@3.11/bin/python3.11 -m venv trenv ==> mac

## TURN ON VIRTUAL MACHINE

1. Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process
2. trenv\Scripts\activate => this is for windows
3. source trenv/bin/activate => this is for mac

## INSTALL LIBRARY

1. pip install -r requirements.txt

## RUN APP

** YOU NEED TO RUN ALL APP SIMULTANEOUSLY, OTHERWISE IT WILL OUPUTS ERRORS

1. uvicorn ctraderbot.websocket.server:app --host 0.0.0.0 --port 9000 --reload  ==> run for websocket
2. python -m ctraderbot.cli --volume 1000 --hold 60 ==> run for trade bot
3. python .\setup\get_ctrader_token.py => get initial tokens
4. python .\setup\get_ctrader_refresh.py => get refresh tokens // If idle for a long time, you have to re-get initial token

## RUN SIMULATION

1. python -c "from ctraderbot.simulate.simple_bot import SimpleBot; 
bot = SimpleBot(client_id='X', client_secret='Y', symbol_id=1, account_id='Z', volume=100000);
bot.simulate_trade_cycle()"

## IF ENV DOESN'T WORK
1. remove the bugged variable using | example=> Remove-Item Env:MYSQL_URL 
1. turn off and on virtual machine

## TURN OFF UVICRON

1. Ctrl + C
2. taskkill /f /im python.exe => if no.1 doesn't work

## TURN OFF VIRTUAL MACHINE

1. deactivate

## Setup for .Env

1. echo $Env:CTRADER_SYMBOL_ID
2. Remove-Item Env:CTRADER_ACCOUNT

## List of Subaccounts:

1. ProtoOAGetAccountListByAccessTokenReq

✅ Available accounts from token:
🔹 42869244
🔹 42825116 ← THIS ONE ACTIVE BALANCE
🔹 42596960
🔹 42610743 ← THIS ONE DEMO